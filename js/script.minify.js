let pokemonRepository=function(){let d=[];function a(a){d.push(a)}function b(){return d}function c(a){pokemonRepository.loadDetails(a).then(function(){showModal(a)})}return document.querySelector("#modal-container"),{add:a,getAll:b,addListItem:function(b){let e=document.querySelector(".pokemon-list"),d=document.createElement("li"),a=document.createElement("button");a.innerText=b.name,a.classList.add("button-class"),a.classList.add("btn"),a.classList.add("btn-primary"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#exampleModal"),d.appendChild(a),e.appendChild(d),function(a,b){a.addEventListener("click",function(){c(b)})}(a,b)},loadList:function(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(a){return a.json()}).then(function(b){b.results.forEach(function(b){let c={name:b.name,detailsUrl:b.url};a(c),console.log(c)})}).catch(function(a){console.error(a)})},loadDetails:function(a){return fetch(a.detailsUrl).then(function(a){return a.json()}).then(function(b){a.imageUrlFront=b.sprites.front_default,a.imageUrlBack=b.sprites.back_default,a.height=b.height,a.weight=b.weight,a.types=[...b.types],a.abilities=b.abilities}).catch(function(a){console.error(a)})},showDetails:c}}();function showModal(a){let b=$(".modal-body"),e=$(".modal-title");$(".modal-header"),e.empty(),b.empty();let j=$("<h1>"+a.name+"</h1>"),f=$('<img class="modal-img" style="width:50%">');f.attr("src",a.imageUrlFront);let g=$('<img class="" style="width:50%">');g.attr("src",a.imageUrlBack);let h="";for(let c=0;c<a.types.length;c++)h+=a.types[c].type.name+" ";let i="";for(let d=0;d<a.abilities.length;d++)i+=a.abilities[d].ability.name+" ";let k=$("<p>height : "+a.height+"</p>"),l=$("<p>weight : "+a.weight+"</p>"),m=$("<p>types : "+h+"</p>"),n=$("<p>abilities : "+i+"</p>");e.append(j),b.append(f),b.append(g),b.append(k),b.append(l),b.append(m),b.append(n)}function hideModal(){document.querySelector("#modal-container").classList.remove("is-visible"),dialogPromiseReject&&(dialogPromiseReject(),dialogPromiseReject=null)}function showDialog(d,e){showModal(d,e);let c=modalContainer.querySelector(".modal"),a=document.createElement("button");a.classList.add("modal-confirm"),a.innerText="Confirm";let b=document.createElement("button");return b.classList.add("modal-cancel"),b.innerText="Cancel",c.appendChild(a),c.appendChild(b),a.focus(),new Promise((d,c)=>{b.addEventListener("click",hideModal),a.addEventListener("click",()=>{dialogPromiseReject=null,hideModal(),d()}),dialogPromiseReject=c})}pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(a){pokemonRepository.addListItem(a)})}),document.querySelector("#show-dialog").addEventListener("click",()=>{showDialog("Confirm action","Are you sure you want to do this?").then(function(){alert("confirmed!")},()=>{alert("not confirmed")})}),window.addEventListener("keydown",a=>{let b=document.querySelector("#modal-container");"Escape"===a.key&&b.classList.contains("is-visible")&&hideModal()});let modalContainer=document.querySelector("#modal-container");modalContainer.addEventListener("click",a=>{a.target===modalContainer&&hideModal()}),document.querySelector("#show-modal").addEventListener("click",()=>{showModal("Modal title","This is the modal content!")})